{"version":3,"sources":["webpack:///webpack/bootstrap cf41aad98ac0ac3f2dc4","webpack:///./src/controllers/catController.js","webpack:///./src/views/adminFormView.js","webpack:///./src/views/catView.js","webpack:///./src/catclicker.js","webpack:///./src/models/catModel.js","webpack:///./src/views/menuView.js","webpack:///./src/views/progressBarView.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,wE;;;;;;;;AChFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,wE;;;;;;;;;AC3CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,kE;;;;;;;;;AClCA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,mE;;;;;;;;;;ACjCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;;AAEA,mE;;;;;;;;AC7BA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC,+FAAiC;AACvE,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA,0E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cf41aad98ac0ac3f2dc4","import catModel from '../models/catModel';\r\nimport catView from '../views/catView';\r\nimport menuView from '../views/menuView';\r\nimport progressBarView from '../views/progressBarView';\r\nimport adminFormView from '../views/adminFormView';\r\n\r\nconst catController = {\r\n  init() {\r\n    catController.initModel();\r\n    progressBarView.init();\r\n    menuView.init();\r\n    catView.init();\r\n    adminFormView.init();\r\n  },\r\n  initModel() {\r\n    for (const cat of catModel.data) {\r\n      cat.clicks = 0;\r\n    }\r\n  },\r\n  getAllCats() {\r\n    return catModel.data;\r\n  },\r\n  increaseCounter() {\r\n    catModel.data[catModel.currentCat].clicks += 1;\r\n    catView.render();\r\n  },\r\n  increaseLoadedImageCounter() {\r\n    catModel.loadImgCounter += 1;\r\n  },\r\n  getCurrentCat() {\r\n    return catModel.data[catModel.currentCat];\r\n  },\r\n  setCurrentCat(id) {\r\n    catModel.currentCat = id;\r\n  },\r\n  getLoadedPercent() {\r\n    return ((catModel.loadImgCounter * 100) / catModel.data.length);\r\n  },\r\n  updateInfo(obj) {\r\n    const currentCat = catModel.data[catModel.currentCat];\r\n    const objKeys = Object.keys(obj);\r\n    for (const key of objKeys) {\r\n      currentCat[key] = obj[key];\r\n    }\r\n    menuView.init();\r\n    catView.render();\r\n  },\r\n  loadAllCats() {\r\n    const allCats = catController.getAllCats();\r\n    const imageArr = [];\r\n    for (const cat of allCats) {\r\n      const catImagePromise = new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.src = cat.url;\r\n        img.onload = () => {\r\n          catController.increaseLoadedImageCounter();\r\n          progressBarView.renderProgressBar();\r\n          resolve(cat.url);\r\n        };\r\n        img.onerror = () => reject(cat.url);\r\n      });\r\n      imageArr.push(catImagePromise);\r\n    }\r\n    Promise.all(imageArr).then(() => {\r\n      setTimeout(() => {\r\n        progressBarView.hideProgressBar();\r\n        catView.show();\r\n        catView.render();\r\n      }, 500);\r\n    });\r\n  },\r\n  adminFormOpenState(state) {\r\n    if (state !== null && typeof state === 'boolean') {\r\n      catModel.adminFormOpenState = state;\r\n      return false;\r\n    }\r\n    return catModel.adminFormOpenState;\r\n  },\r\n};\r\n\r\nexport default catController;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/controllers/catController.js\n// module id = 0\n// module chunks = 0","import catController from '../controllers/catController';\r\n\r\nconst adminFormView = {\r\n  init() {\r\n    this.form = document.querySelector('.admin-form');\r\n    this.catName = document.querySelector('.admin-form__cat-name');\r\n    this.catURL = document.querySelector('.admin-form__cat-url');\r\n    this.catClicks = document.querySelector('.admin-form__cat-clicks');\r\n    this.cancelBtn = document.querySelector('.admin-form-cancel');\r\n    this.submitBtn = document.querySelector('.admin-form-submit');\r\n    this.cancelBtn.addEventListener('click', (e) => {\r\n      this.close();\r\n      e.preventDefault();\r\n    });\r\n    this.submitBtn.addEventListener('click', (e) => {\r\n      const updateObj = {\r\n        name: adminFormView.catName.value,\r\n        url: adminFormView.catURL.value,\r\n        clicks: +adminFormView.catClicks.value,\r\n      };\r\n      catController.updateInfo(updateObj);\r\n      this.close();\r\n      e.preventDefault();\r\n    });\r\n    this.form.style.display = 'none';\r\n  },\r\n  render() {\r\n    this.form.style.display = 'block';\r\n    const currentCat = catController.getCurrentCat();\r\n    this.catName.value = currentCat.name;\r\n    this.catURL.value = currentCat.url;\r\n    this.catClicks.value = currentCat.clicks;\r\n    catController.adminFormOpenState(true);\r\n  },\r\n  close() {\r\n    this.catName.value = '';\r\n    this.catURL.value = '';\r\n    this.catClicks.value = '';\r\n    this.form.style.display = 'none';\r\n    catController.adminFormOpenState(false);\r\n  },\r\n};\r\n\r\nexport default adminFormView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/adminFormView.js\n// module id = 1\n// module chunks = 0","import catController from '../controllers/catController';\r\nimport adminFormView from '../views/adminFormView';\r\n\r\nconst catView = {\r\n  init() {\r\n    this.catNameElement = document.querySelector('.cat__name');\r\n    this.catImageElement = document.querySelector('.cat__image');\r\n    this.catClickCounterElement = document.querySelector('.cat__clickCounter');\r\n    this.cat = document.querySelector('.cat');\r\n    this.adminBtn = document.querySelector('.cat__adminBtn');\r\n    this.cat.style.display = 'none'; // по умолчанию скрываем поле вывода котов\r\n\r\n    this.adminBtn.addEventListener('click', () => {\r\n      if (!catController.adminFormOpenState()) {\r\n        adminFormView.render();\r\n      }\r\n    });\r\n    this.catImageElement.addEventListener('click', () => {\r\n      catController.increaseCounter();\r\n    });\r\n    // Кешируем картинки и после полной их загрузки показываем окно с кошками\r\n    catController.loadAllCats();\r\n  },\r\n  show() {\r\n    this.cat.style.display = 'block';\r\n  },\r\n  render() {\r\n    const currentCat = catController.getCurrentCat();\r\n    this.catNameElement.textContent = currentCat.name;\r\n    this.catImageElement.src = currentCat.url;\r\n    this.catClickCounterElement.textContent = currentCat.clicks;\r\n  },\r\n};\r\n\r\nexport default catView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/catView.js\n// module id = 2\n// module chunks = 0","import catController from './controllers/catController';\r\n\r\nfunction init() {\r\n  {\r\n    catController.init();\r\n  }\r\n}\r\nwindow.addEventListener('DOMContentLoaded', init);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/catclicker.js\n// module id = 3\n// module chunks = 0","const catModel =  {\r\n  // Внутри data лежат объекты котов которые содержат url: 'httpX://....' и name: 'имя котика'\r\n  data: [\r\n    {\r\n      url: 'https://www.rd.com/wp-content/uploads/sites/2/2016/02/06-train-cat-shake-hands.jpg',\r\n      name: 'Кися',\r\n    },\r\n    {\r\n      url: 'http://www.catster.com/wp-content/uploads/2017/06/small-kitten-meowing.jpg',\r\n      name: 'Блохастик',\r\n    },\r\n    {\r\n      url: 'http://www.nationalgeographic.com/content/dam/animals/thumbs/rights-exempt/mammals/d/domestic-cat_thumb.ngsversion.1472140774957.adapt.1900.1.jpg',\r\n      name: 'Мурка',\r\n    },\r\n    {\r\n      url: 'https://www.petfinder.com/wp-content/uploads/2012/11/152177319-declawing-cats-632x475-e1354303246526-632x353.jpg',\r\n      name: 'Туся',\r\n    },\r\n    {\r\n      url: 'http://media1.santabanta.com/full1/Animals/Cats/cats-85a.jpg',\r\n      name: 'Мр. мур-мур',\r\n    },\r\n    {\r\n      url: 'https://www.wmj.ru/imgs/2016/12/05/09/929194/d1bbd77c2612ef45eee03defa5c373710d7c56e8.jpg',\r\n      name: 'Барсик',\r\n    },\r\n  ],\r\n    currentCat: 0,\r\n    loadImgCounter: 0,\r\n    adminFormOpenState: false,\r\n};\r\n\r\nexport default catModel;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/models/catModel.js\n// module id = 4\n// module chunks = 0","import catController from '../controllers/catController';\r\nimport catView from '../views/catView';\r\nimport adminFormView from '../views/adminFormView';\r\n\r\n// Боковая менюшка со списком котиков\r\nconst menuView = {\r\n  init() {\r\n    this.menuContainer = document.querySelector('.menuContainer');\r\n    this.menuContainer.innerHTML = '';\r\n    const menu = document.createElement('ul');\r\n    menu.classList.add('menuList');\r\n    const allCats = catController.getAllCats();\r\n\r\n    for (const [index, cat] of allCats.entries()) {\r\n      const catLi = document.createElement('li');\r\n      catLi.textContent = cat.name;\r\n      catLi.addEventListener('click', () => {\r\n        catController.setCurrentCat(index);\r\n        if (catController.adminFormOpenState()) {\r\n          adminFormView.render();\r\n        }\r\n        catView.render();\r\n      });\r\n      menu.appendChild(catLi);\r\n    }\r\n    this.menuContainer.appendChild(menu);\r\n  },\r\n};\r\n\r\nexport default menuView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/menuView.js\n// module id = 5\n// module chunks = 0","import catController from '../controllers/catController';\r\n\r\nconst progressBarView = {\r\n  init() {\r\n    this.progressBarContainer = document.querySelector('.progressBarContainer');\r\n    this.progressBar = document.querySelector('.progressBar');\r\n  },\r\n  renderProgressBar() {\r\n    this.progressBar.style.width = `${catController.getLoadedPercent()}%`;\r\n  },\r\n  hideProgressBar() {\r\n    this.progressBarContainer.style.display = 'none';\r\n  },\r\n};\r\n\r\nexport default progressBarView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/progressBarView.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}